/** sgml-stream is MIT licensed, see /LICENSE. */
namespace HTL\SGMLStream\Tests;

use namespace HTL\TestChain;
use function HTL\Expect\expect;

<<TestChain\Discover>>
function given_a_spread_of_special_set_attribute_to_a_tag_with_the_same_attribute_specified_in_the_xhp_open_test(
  TestChain\Chain $chain,
)[]: TestChain\Chain {
  return $chain->group(__FUNCTION__)

    ->test(
      'test_the_common_values_set_before_the_spread_are_overridden',
      () ==> {
        $type_under_test =
          <empty
            data-special="from-before-spread"
            {...<empty data-special="from-spread" />}
          />;
        expect(get_attributes($type_under_test))->toEqual(
          tuple(dict[], dict['data-special' => 'from-spread']),
        );
      },
    )
    ->test(
      'test_the_common_values_set_after_the_spread_override_the_spread',
      () ==> {
        $type_under_test =
          <empty
            {...<empty data-special="from-spread" />}
            data-special="from-after-spread"
          />;
        expect(get_attributes($type_under_test))->toEqual(
          tuple(dict[], dict['data-special' => 'from-after-spread']),
        );
      },
    );
}
